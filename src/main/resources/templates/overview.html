<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script th:inline="javascript">

  function LoopDocuments() {
    let json = [[${ map_list }]];

    for (let i = 0; i < json.length; i++) {
      let obj = json[i];
      console.log(obj.id + ", " + obj.signatureOne + ", " + obj.signatureTwo);

      var y = document.createElement('input');
      y.type = "text";
      y.style.width = '110px';
      y.value = "ID: " + (obj.id);
      document.getElementById('test').appendChild(y);

      var t = document.createElement('input');
      t.type = "text";
      t.style.width = '220px';
      t.value = "Date and time: " + (obj.dateTime);
      document.getElementById('test').appendChild(t);

      var a = document.createElement('input');
      a.type = "text";
      a.style.width = '100px';
      a.value = "first signed: " + (obj.firstSignature);
      document.getElementById('test').appendChild(a);

      var s = document.createElement('input');
      s.type = "text";
      s.style.width = '120px';
      s.value = "second signed: " + (obj.secondSignature);
      document.getElementById('test').appendChild(s);

      var v = document.createElement('input');
      v.type = "text";
      v.style.width = '220px';
      v.value = (obj.signatureOne);
      document.getElementById('test').appendChild(v);

      var z = document.createElement('input');
      z.type = "text";
      z.style.width = '250px';
      z.value = (obj.signatureTwo);
      document.getElementById('test').appendChild(z);

      var q = document.createElement('input');
      q.type = "button";
      q.value = 'Download document';
      q.style.value = "testing";
      q.style.width = '300px';
      q.style.height = '20px';
      q.name = "testovanie";
      document.getElementById('test').appendChild(q);

      var m = document.createElement('input');
      m.type = "button";
      m.value = 'Delete document';
      m.style.width = '300px';
      m.style.height = '20px';
      m.name = "testovanie";
      document.getElementById('test').appendChild(m);

      q.addEventListener('click', function () {
        var x = confirm('Do you want to download document? ' + obj.id);
        if (x) {
          window.location.replace("/downloadPdf/" + obj.id);
        }
      });

      m.addEventListener('click', async function () {
        var x = confirm('Do you really want to remove document? ' + obj.id);
        if (x) {
          var urlDelete = '/delete/' + obj.id;
          await fetch(urlDelete, {
            method: "POST",
          });

          location.reload();
        }
      });

      var linebreak = document.createElement("br");
      document.getElementById('test').appendChild(linebreak);

    };

  }

</script>

<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>

<body onload="LoopDocuments()">
  <h2> Documents overview: </h2>
  <br>

  <h1 id="test"></h1>


</body>

</html>